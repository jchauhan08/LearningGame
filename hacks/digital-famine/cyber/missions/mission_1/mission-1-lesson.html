---
layout: post
title: "Alien Defense ‚Äî Mission 1: Build the Base Database"
description: "Learn database fundamentals through hands-on SQLite construction"
permalink: /digital-famine/cybersecurity-game/mission-1-lesson/
categories: [CSP, Submodule, Database]
tags: [sql, database, fundamentals, sqlite]
author: "Aditya Srivastava"
microblog: True
breadcrumb: True
date: 2025-10-26
footer:
  previous: /digital-famine/cybersecurity-game
  home: /digital-famine/cybersecurity-game
  next: /digital-famine/cybersecurity-game/mission-2-lesson
---
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mission 1: Build the Base Database</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/sql.js/1.8.0/sql-wasm.js"></script>
    <style>
        body.mission1-body-bg {
            background:
                radial-gradient(140% 120% at 20% -10%, rgba(120, 214, 255, 0.18) 0%, transparent 60%),
                radial-gradient(120% 120% at 80% 0%, rgba(156, 39, 176, 0.16) 0%, transparent 65%),
                radial-gradient(120% 160% at 50% 100%, rgba(33, 150, 243, 0.12) 0%, transparent 55%),
                linear-gradient(185deg, #020410 0%, #050a1c 45%, #0b132d 100%);
            min-height: 100vh;
            color: #f5f7ff;
            background-attachment: fixed;
        }
        .pulse {
            animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: .5; }
        }
        .section-hidden { display: none; }
        .mission1-container {
            position: relative;
            padding: 3.5rem 1.8rem 4rem;
            background: radial-gradient(120% 150% at 50% 0%, rgba(32, 45, 80, 0.85) 0%, rgba(10, 14, 28, 0.95) 45%, rgba(2, 4, 12, 0.98) 100%);
            border-radius: 2rem;
            overflow: hidden;
            box-shadow: 0 35px 80px rgba(0, 0, 0, 0.55);
            max-width: 1200px;
            margin: 2rem auto;
        }
        .mission1-container::before {
            content: "";
            position: absolute;
            inset: -10% -20%;
            background: radial-gradient(circle at 20% 20%, rgba(120, 214, 255, 0.18), transparent 60%),
                        radial-gradient(circle at 80% 15%, rgba(156, 39, 176, 0.18), transparent 65%),
                        radial-gradient(circle at 50% 80%, rgba(33, 150, 243, 0.12), transparent 55%);
            opacity: 0.85;
            pointer-events: none;
        }
        .mission1-container::after {
            content: "";
            position: absolute;
            inset: 0;
            background-image: radial-gradient(rgba(255, 255, 255, 0.08) 1px, transparent 1px);
            background-size: 85px 85px;
            opacity: 0.22;
            mix-blend-mode: screen;
            pointer-events: none;
        }
        .mission1-container > * {
            position: relative;
            z-index: 1;
        }
        .mission1-card, .mission-section > div > div.bg-slate-800\/70, .mission-section > div > div.bg-slate-800\/50 {
            background: rgba(8, 12, 24, 0.85) !important;
            color: #e6edff !important;
            border-radius: 1.25rem !important;
            border: 1px solid rgba(120, 214, 255, 0.2) !important;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.35) !important;
        }
        .mission1-card h2, .mission1-card h3, .mission1-card h4 {
            color: #78d6ff !important;
        }
        .mission-section button {
            background: linear-gradient(90deg, #2196F3 0%, #9c27b0 100%) !important;
            color: #fff !important;
            border: none !important;
            font-weight: 600;
            box-shadow: 0 2px 8px rgba(33,150,243,0.12);
        }
        .mission-section button:hover {
            background: linear-gradient(90deg, #1565c0 0%, #6a1b9a 100%) !important;
        }
        .mission-section .bg-blue-900\/20, .mission-section .bg-red-900\/20, .mission-section .bg-green-900\/20 {
            background: rgba(33, 150, 243, 0.10) !important;
            border: 1px solid rgba(120, 214, 255, 0.18) !important;
        }
        .mission-section .bg-slate-950 {
            background: rgba(12, 18, 34, 0.9) !important;
            color: #9bd9ff !important;
        }
        .mission-section table th, .mission-section table td {
            color: #e6edff !important;
        }
        .mission-section .text-blue-300, .mission-section .text-red-300, .mission-section .text-green-300, .mission-section .text-purple-300 {
            color: #78d6ff !important;
        }
        .mission-section .border-blue-500\/30, .mission-section .border-red-500\/30, .mission-section .border-green-500\/30, .mission-section .border-purple-500\/30 {
            border-color: rgba(120, 214, 255, 0.25) !important;
        }
        .mission-section .text-red-400, .mission-section .text-green-400, .mission-section .text-yellow-400 {
            color: #f9d949 !important;
        }
        .mission-section .bg-yellow-900\/30 {
            background: rgba(249, 217, 73, 0.12) !important;
            border-color: #ffe58a !important;
        }
        .mission-section .bg-slate-900\/50, .mission-section .bg-slate-900\/70 {
            background: rgba(19, 28, 48, 0.95) !important;
        }
        .mission-section .border-purple-500\/30 {
            border-color: rgba(120, 214, 255, 0.25) !important;
        }
        .mission-section .text-purple-400 {
            color: #78d6ff !important;
        }
        .mission-section .text-blue-400 {
            color: #78d6ff !important;
        }
        .mission-section .text-red-400 {
            color: #f9d949 !important;
        }
        .mission-section .text-green-300 {
            color: #82ffa4 !important;
        }
        .mission-section .text-yellow-400 {
            color: #ffe58a !important;
        }
        .mission-section .text-gray-300 {
            color: #c9d8ff !important;
        }
        .mission-section .font-semibold {
            font-weight: 600 !important;
        }
        .mission-section .rounded-lg {
            border-radius: 1.25rem !important;
        }
        .mission-section .font-mono {
            font-family: 'Fira Mono', 'Consolas', 'Menlo', monospace !important;
        }
        @media (max-width: 680px) {
            .mission1-container {
                padding: 1.6rem 0.5rem 2rem;
            }
        }
    </style>
</head>
<body class="mission1-body-bg">
    <div class="mission1-container">
        <div class="mission1-card" style="margin-bottom:2rem;">
            <div class="flex items-center justify-between overflow-x-auto pb-2 gap-2">
                <button onclick="goToSection(0)" class="nav-btn flex flex-col items-center min-w-[100px] px-3 py-2 rounded-lg transition-all bg-purple-600" data-section="0">
                    <span class="text-2xl mb-1">üì°</span>
                    <span class="text-xs text-center">Briefing</span>
                </button>
                <div class="w-8 h-0.5 bg-purple-500/30"></div>
                <button onclick="goToSection(1)" class="nav-btn flex flex-col items-center min-w-[100px] px-3 py-2 rounded-lg transition-all bg-slate-700/50" data-section="1">
                    <span class="text-2xl mb-1">üìö</span>
                    <span class="text-xs text-center">Fundamentals</span>
                </button>
                <div class="w-8 h-0.5 bg-purple-500/30"></div>
                <button onclick="goToSection(2)" class="nav-btn flex flex-col items-center min-w-[100px] px-3 py-2 rounded-lg transition-all bg-slate-700/50" data-section="2">
                    <span class="text-2xl mb-1">üíª</span>
                    <span class="text-xs text-center">Schema</span>
                </button>
                <div class="w-8 h-0.5 bg-purple-500/30"></div>
                <button onclick="goToSection(3)" class="nav-btn flex flex-col items-center min-w-[100px] px-3 py-2 rounded-lg transition-all bg-slate-700/50" data-section="3">
                    <span class="text-2xl mb-1">üõ°Ô∏è</span>
                    <span class="text-xs text-center">Agents</span>
                </button>
                <div class="w-8 h-0.5 bg-purple-500/30"></div>
                <button onclick="goToSection(4)" class="nav-btn flex flex-col items-center min-w-[100px] px-3 py-2 rounded-lg transition-all bg-slate-700/50" data-section="4">
                    <span class="text-2xl mb-1">üéØ</span>
                    <span class="text-xs text-center">Sightings</span>
                </button>
                <div class="w-8 h-0.5 bg-purple-500/30"></div>
                <button onclick="goToSection(5)" class="nav-btn flex flex-col items-center min-w-[100px] px-3 py-2 rounded-lg transition-all bg-slate-700/50" data-section="5">
                    <span class="text-2xl mb-1">üèÜ</span>
                    <span class="text-xs text-center">Validation</span>
                </button>
            </div>
        </div>

        <div id="section-0" class="mission-section">
            <div class="space-y-6">
                <div class="bg-slate-800/70 backdrop-blur border border-red-500/50 rounded-lg p-8">
                    <div class="flex items-center gap-3 mb-4">
                        <span class="text-4xl pulse">üì°</span>
                        <h2 class="text-3xl font-bold text-red-400">INCOMING TRANSMISSION</h2>
                    </div>
                    <div class="space-y-4 text-lg">
                        <p>Commander, Earth's intelligence network is down. The alien strike obliterated our orbital database. Without this data, our radar systems are blind and field teams cannot coordinate.</p>
                        <p class="text-purple-300">Your mission: rebuild earth_base.db from scratch. You'll need to architect two critical tables, populate them with intel, and bring our early warning system back online.</p>
                        <div class="grid grid-cols-3 gap-4 mt-6 text-center">
                            <div class="bg-slate-900/50 p-4 rounded-lg border border-purple-500/30">
                                <p class="text-purple-400 font-semibold">Time</p>
                                <p class="text-2xl">15 min</p>
                            </div>
                            <div class="bg-slate-900/50 p-4 rounded-lg border border-purple-500/30">
                                <p class="text-purple-400 font-semibold">Difficulty</p>
                                <p class="text-2xl">‚≠ê‚≠ê‚òÜ‚òÜ‚òÜ</p>
                            </div>
                            <div class="bg-slate-900/50 p-4 rounded-lg border border-purple-500/30">
                                <p class="text-purple-400 font-semibold">Reward</p>
                                <p class="text-2xl text-yellow-400">Vault Code</p>
                            </div>
                        </div>
                    </div>
                </div>
                <button onclick="goToSection(1)" class="w-full bg-purple-600 hover:bg-purple-700 py-4 rounded-lg font-semibold text-lg">Begin Mission</button>
            </div>
        </div>

        <div id="section-1" class="mission-section section-hidden">
            <div class="space-y-6">
                <div class="bg-slate-800/70 backdrop-blur border border-purple-500/30 rounded-lg p-8">
                    <h2 class="text-3xl font-bold mb-6">üìö Database Fundamentals</h2>
                    <div class="space-y-6 text-lg">
                        <div>
                            <h3 class="text-2xl font-semibold text-purple-300 mb-3">What IS a Database?</h3>
                            <p class="mb-4">Think of a database like a super-organized filing cabinet:</p>
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                <div class="bg-slate-900/50 p-4 rounded-lg border border-purple-500/20">
                                    <p class="text-purple-400 font-semibold mb-2">üìÅ Tables</p>
                                    <p class="text-sm">Filing drawers</p>
                                </div>
                                <div class="bg-slate-900/50 p-4 rounded-lg border border-purple-500/20">
                                    <p class="text-purple-400 font-semibold mb-2">üìÑ Rows</p>
                                    <p class="text-sm">Individual files</p>
                                </div>
                                <div class="bg-slate-900/50 p-4 rounded-lg border border-purple-500/20">
                                    <p class="text-purple-400 font-semibold mb-2">üìù Columns</p>
                                    <p class="text-sm">Specific details</p>
                                </div>
                            </div>
                        </div>
                        <div class="bg-green-900/20 border border-green-500/30 rounded-lg p-4">
                            <p class="font-semibold">‚úÖ Database initialized! Your connection is ready.</p>
                        </div>
                    </div>
                </div>
                <button onclick="goToSection(2)" class="w-full bg-purple-600 hover:bg-purple-700 py-4 rounded-lg font-semibold text-lg">Continue to Schema Design</button>
            </div>
        </div>

        <div id="section-2" class="mission-section section-hidden">
            <div class="space-y-6">
                <div class="bg-slate-800/70 backdrop-blur border border-purple-500/30 rounded-lg p-8">
                    <h2 class="text-3xl font-bold mb-6">üíª Understanding Tables and Schema</h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="bg-slate-900/50 border border-blue-500/30 rounded-lg p-6">
                            <h4 class="text-xl font-bold text-blue-400 mb-3">üõ°Ô∏è Table 1: Agents</h4>
                            <p class="text-sm text-gray-300 mb-4">Stores field operatives info</p>
                            <ul class="space-y-2 text-sm">
                                <li>agent_id - Unique number</li>
                                <li>codename - Secret identity</li>
                                <li>clearance_level - Rating 1-10</li>
                                <li>location - Where stationed</li>
                                <li>status - active/standby/compromised</li>
                            </ul>
                        </div>
                        <div class="bg-slate-900/50 border border-red-500/30 rounded-lg p-6">
                            <h4 class="text-xl font-bold text-red-400 mb-3">üéØ Table 2: Alien_Sightings</h4>
                            <p class="text-sm text-gray-300 mb-4">Logs alien contact events</p>
                            <ul class="space-y-2 text-sm">
                                <li>sighting_id - Event number</li>
                                <li>timestamp - When it happened</li>
                                <li>location - Where it happened</li>
                                <li>threat_level - Danger 1-5</li>
                                <li>description - What was seen</li>
                                <li>verified_by - Which agent</li>
                            </ul>
                        </div>
                    </div>
                </div>
                <button onclick="goToSection(3)" class="w-full bg-purple-600 hover:bg-purple-700 py-4 rounded-lg font-semibold text-lg">Ready to Build Tables</button>
            </div>
        </div>

        <div id="section-3" class="mission-section section-hidden">
            <div class="space-y-6">
                <div class="bg-slate-800/70 backdrop-blur border border-purple-500/30 rounded-lg p-8">
                    <h2 class="text-3xl font-bold mb-6">üõ°Ô∏è Build the Agents Table</h2>
                    <div class="bg-blue-900/20 border border-blue-500/30 rounded-lg p-6">
                        <h3 class="text-xl font-semibold text-blue-300 mb-3">üéØ Your Mission</h3>
                        <p class="mb-4">Write the SQL to create the <b>Agents</b> table below. When ready, click <b>Run SQL</b> to build your table.</p>
                        <div class="flex gap-2 mb-2">
                            <textarea id="agents-sql" class="w-full text-white bg-slate-900 p-3 rounded-lg font-mono" rows="4" placeholder="CREATE TABLE Agents (agent_id INTEGER PRIMARY KEY, codename TEXT UNIQUE, clearance_level INTEGER, location TEXT, status TEXT);" disabled></textarea>
                            <button id="agents-hint-btn" type="button" class="rounded-lg px-4 py-2 font-semibold bg-blue-700 hover:bg-blue-800" style="min-width:110px;" disabled onclick="showAgentsHint()">Show Hint</button>
                        </div>
                        <button id="run-agents-sql" onclick="runAgentsSQL()" class="w-full py-3 rounded-lg font-semibold bg-blue-600 hover:bg-blue-700 mb-2" disabled>Run SQL</button>
                        <div id="agents-sql-loading" class="text-blue-300 font-semibold mb-2">Loading database...</div>
                        <div id="agents-sql-feedback" class="text-red-400 font-semibold mb-2"></div>
                    </div>
                    <div id="agents-result" class="section-hidden">
                        <div class="bg-green-900/20 border border-green-500/30 rounded-lg p-6">
                            <h3 class="text-xl font-semibold text-green-300 mb-3">‚úÖ Success!</h3>
                            <div class="bg-slate-950 border border-green-500/20 rounded-lg p-4 overflow-x-auto">
                                <table class="w-full text-sm">
                                    <thead>
                                        <tr class="border-b border-green-500/30">
                                            <th class="text-left py-2 px-3">ID</th>
                                            <th class="text-left py-2 px-3">Codename</th>
                                            <th class="text-left py-2 px-3">Clearance</th>
                                            <th class="text-left py-2 px-3">Location</th>
                                            <th class="text-left py-2 px-3">Status</th>
                                        </tr>
                                    </thead>
                                    <tbody id="agents-tbody"></tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
                <button id="continue-to-sightings" onclick="goToSection(4)" class="section-hidden w-full bg-purple-600 hover:bg-purple-700 py-4 rounded-lg font-semibold text-lg">Continue to Sightings Table</button>
            </div>
        </div>

        <div id="section-4" class="mission-section section-hidden">
            <div class="space-y-6">
                <div class="bg-slate-800/70 backdrop-blur border border-purple-500/30 rounded-lg p-8">
                    <h2 class="text-3xl font-bold mb-6">üéØ Build Alien Sightings Table</h2>
                    <div class="bg-red-900/20 border border-red-500/30 rounded-lg p-6">
                        <h3 class="text-xl font-semibold text-red-300 mb-3">üéØ Your Mission</h3>
                        <p class="mb-4">Write the SQL to create the <b>Alien_Sightings</b> table below. When ready, click <b>Run SQL</b> to build your table.</p>
                        <div class="flex gap-2 mb-2">
                            <textarea id="sightings-sql" class="w-full text-white bg-slate-900 p-3 rounded-lg font-mono" rows="5" placeholder="CREATE TABLE Alien_Sightings (sighting_id INTEGER PRIMARY KEY, timestamp TEXT, location TEXT, threat_level INTEGER, description TEXT, verified_by INTEGER);" disabled></textarea>
                            <button id="sightings-hint-btn" type="button" class="rounded-lg px-4 py-2 font-semibold bg-red-700 hover:bg-red-800" style="min-width:110px;" disabled onclick="showSightingsHint()">Show Hint</button>
                        </div>
                        <button id="run-sightings-sql" onclick="runSightingsSQL()" class="w-full py-3 rounded-lg font-semibold bg-red-600 hover:bg-red-700 mb-2" disabled>Run SQL</button>
                        <div id="sightings-sql-loading" class="text-red-300 font-semibold mb-2">Loading database...</div>
                        <div id="sightings-sql-feedback" class="text-red-400 font-semibold mb-2"></div>
                    </div>
                    <div id="sightings-result" class="section-hidden">
                        <div class="bg-green-900/20 border border-green-500/30 rounded-lg p-6">
                            <h3 class="text-xl font-semibold text-green-300 mb-3">‚úÖ Threat Intelligence Logged!</h3>
                            <div class="bg-slate-950 border border-green-500/20 rounded-lg p-4 overflow-x-auto">
                                <table class="w-full text-sm">
                                    <thead>
                                        <tr class="border-b border-green-500/30">
                                            <th class="text-left py-2 px-3">ID</th>
                                            <th class="text-left py-2 px-3">Location</th>
                                            <th class="text-left py-2 px-3">Threat</th>
                                            <th class="text-left py-2 px-3">Description</th>
                                            <th class="text-left py-2 px-3">Agent</th>
                                        </tr>
                                    </thead>
                                    <tbody id="sightings-tbody"></tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
                <button id="continue-to-validation" onclick="goToSection(5)" class="section-hidden w-full bg-purple-600 hover:bg-purple-700 py-4 rounded-lg font-semibold text-lg">Proceed to Validation</button>
            </div>
        </div>

        <div id="section-5" class="mission-section section-hidden">
            <div class="space-y-6">
                <div class="bg-slate-800/70 backdrop-blur border border-purple-500/30 rounded-lg p-8">
                    <h2 class="text-3xl font-bold mb-6">üèÜ Mission Validation</h2>
                    <div class="bg-slate-900/70 border border-purple-500/30 rounded-lg p-6">
                        <h3 class="text-xl font-semibold text-purple-300 mb-3">Automated Check System</h3>
                        <div id="validation-start">
                            <button onclick="runValidation()" class="w-full bg-purple-600 hover:bg-purple-700 py-3 rounded-lg font-semibold">Run System Validation</button>
                        </div>
                    </div>
                    <div id="validation-results" class="section-hidden"></div>
                </div>
            </div>
        </div>
        </div>
        <script>
            document.addEventListener('DOMContentLoaded', () => {
                document.body.classList.add('mission1-body-bg');
            });
        </script>

    <script>
        let db = null;

        function showAgentsHint() {
            document.getElementById('agents-sql').value =
`CREATE TABLE Agents (
    agent_id,
    codename,
    clearance_level,
    location,
    status
);`;
        }

        function showSightingsHint() {
            document.getElementById('sightings-sql').value =
`CREATE TABLE Alien_Sightings (
    sighting_id,
    timestamp,
    location,
    threat_level,
    description,
    verified_by
);`;
        }

        async function initDatabase() {
            try {
                const SQL = await initSqlJs({
                    locateFile: file => `https://cdnjs.cloudflare.com/ajax/libs/sql.js/1.8.0/${file}`
                });
                db = new SQL.Database();
                // Enable SQL input/button and hide loading for both editors
                document.getElementById('agents-sql').disabled = false;
                document.getElementById('run-agents-sql').disabled = false;
                document.getElementById('agents-sql-loading').style.display = 'none';
                document.getElementById('agents-hint-btn').disabled = false;
                document.getElementById('sightings-sql').disabled = false;
                document.getElementById('run-sightings-sql').disabled = false;
                document.getElementById('sightings-sql-loading').style.display = 'none';
                document.getElementById('sightings-hint-btn').disabled = false;
            } catch (e) {
                console.error(e);
                document.getElementById('agents-sql-loading').textContent = 'Failed to load database.';
                document.getElementById('sightings-sql-loading').textContent = 'Failed to load database.';
            }
        }
        function goToSection(n) {
            document.querySelectorAll('.mission-section').forEach(s => s.classList.add('section-hidden'));
            document.getElementById('section-' + n).classList.remove('section-hidden');
            document.querySelectorAll('.nav-btn').forEach(b => { b.classList.remove('bg-purple-600'); b.classList.add('bg-slate-700/50'); });
            document.querySelector('.nav-btn[data-section="' + n + '"]').classList.add('bg-purple-600');
            window.scrollTo(0, 0);
        }
        function runAgentsSQL() {
            const sql = document.getElementById('agents-sql').value.trim();
            const feedback = document.getElementById('agents-sql-feedback');
            feedback.textContent = '';
            if (!db) { feedback.textContent = 'Database not initialized.'; return; }
            // Basic validation: must start with CREATE TABLE Agents and have all columns
            const required = [
                /CREATE\s+TABLE\s+Agents/i,
                /agent_id\s+INTEGER\s+PRIMARY\s+KEY/i,
                /codename\s+TEXT\s+UNIQUE/i,
                /clearance_level\s+INTEGER/i,
                /location\s+TEXT/i,
                /status\s+TEXT/i
            ];
            let valid = true;
            for (const r of required) if (!r.test(sql)) valid = false;
            if (!valid) {
                feedback.textContent = 'Your SQL must create the Agents table with all required columns and types.';
                return;
            }
            try {
                db.run(sql);
                // Insert starter data
                [['Shadow',9,'New York','active'],['Phoenix',7,'Tokyo','active'],['Cipher',8,'Berlin','active'],['Ghost',10,'Classified','standby'],['Radar',6,'London','compromised']].forEach(a => db.run('INSERT INTO Agents VALUES (?,?,?,?,?)', [null].concat(a)));
                const r = db.exec('SELECT * FROM Agents')[0].values;
                const tb = document.getElementById('agents-tbody');
                tb.innerHTML = '';
                r.forEach(row => { const tr = document.createElement('tr'); tr.innerHTML = '<td class="py-2 px-3">' + row[0] + '</td><td class="py-2 px-3">' + row[1] + '</td><td class="py-2 px-3">' + row[2] + '</td><td class="py-2 px-3">' + row[3] + '</td><td class="py-2 px-3">' + row[4] + '</td>'; tb.appendChild(tr); });
                document.getElementById('agents-result').classList.remove('section-hidden');
                document.getElementById('continue-to-sightings').classList.remove('section-hidden');
                document.getElementById('run-agents-sql').disabled = true;
                document.getElementById('agents-sql').disabled = true;
                feedback.textContent = '';
            } catch (e) {
                feedback.textContent = 'SQL Error: ' + e.message;
            }
        }

        function runSightingsSQL() {
            const sql = document.getElementById('sightings-sql').value.trim();
            const feedback = document.getElementById('sightings-sql-feedback');
            feedback.textContent = '';
            if (!db) { feedback.textContent = 'Database not initialized.'; return; }
            // Basic validation: must start with CREATE TABLE Alien_Sightings and have all columns
            const required = [
                /CREATE\s+TABLE\s+Alien_Sightings/i,
                /sighting_id\s+INTEGER\s+PRIMARY\s+KEY/i,
                /timestamp\s+TEXT/i,
                /location\s+TEXT/i,
                /threat_level\s+INTEGER/i,
                /description\s+TEXT/i,
                /verified_by\s+INTEGER/i
            ];
            let valid = true;
            for (const r of required) if (!r.test(sql)) valid = false;
            if (!valid) {
                feedback.textContent = 'Your SQL must create the Alien_Sightings table with all required columns and types.';
                return;
            }
            try {
                db.run(sql);
                // Insert starter data
                [
                    ['2025-10-26T14:23','Nevada Desert',4,'Triangular craft',1],
                    ['2025-10-26T16:45','Pacific Ocean',3,'Submerged lights',2],
                    ['2025-10-26T19:12','Amazon',2,'Energy readings',3],
                    ['2025-10-26T21:30','Arctic',5,'Multiple craft',4],
                    ['2025-10-26T23:08','Sahara',3,'Ground markings',1],
                    ['2025-10-27T01:15','Antarctic',4,'Atmospheric disturbance',2],
                    ['2025-10-27T03:42','Himalayas',2,'Radar contact',3],
                    ['2025-10-27T05:55','Mediterranean',3,'Submersible object',5]
                ].forEach(s => db.run('INSERT INTO Alien_Sightings VALUES (?,?,?,?,?,?)', [null].concat(s)));
                const r = db.exec('SELECT s.sighting_id,s.location,s.threat_level,s.description,a.codename FROM Alien_Sightings s JOIN Agents a ON s.verified_by=a.agent_id')[0].values;
                const tb = document.getElementById('sightings-tbody');
                tb.innerHTML = '';
                r.forEach(row => { const tr = document.createElement('tr'); tr.innerHTML = '<td class="py-2 px-3">' + row[0] + '</td><td class="py-2 px-3">' + row[1] + '</td><td class="py-2 px-3">' + row[2] + '</td><td class="py-2 px-3">' + row[3] + '</td><td class="py-2 px-3">' + row[4] + '</td>'; tb.appendChild(tr); });
                document.getElementById('sightings-result').classList.remove('section-hidden');
                document.getElementById('continue-to-validation').classList.remove('section-hidden');
                document.getElementById('run-sightings-sql').disabled = true;
                document.getElementById('sightings-sql').disabled = true;
                feedback.textContent = '';
            } catch (e) {
                feedback.textContent = 'SQL Error: ' + e.message;
            }
        }
        function runValidation() {
            let p = 0;
            const c = [];
            c.push({ n: 'Database', ok: db !== null });
            if (db) p++;
            try { const a = db.exec('SELECT * FROM Agents'); c.push({ n: 'Agents Table', ok: a.length > 0 && a[0].values.length >= 5 }); if (a.length > 0 && a[0].values.length >= 5) p++; } catch(e) { c.push({ n: 'Agents Table', ok: false }); }
            try { const s = db.exec('SELECT * FROM Alien_Sightings'); c.push({ n: 'Sightings Table', ok: s.length > 0 && s[0].values.length >= 8 }); if (s.length > 0 && s[0].values.length >= 8) p++; } catch(e) { c.push({ n: 'Sightings Table', ok: false }); }
                let h = '<div class="bg-slate-900/70 p-6 rounded-lg"><h3 class="text-xl mb-4">Results: ' + p + '/3</h3>';
            c.forEach(x => { h += '<div class="p-3 mb-2 rounded ' + (x.ok ? 'bg-green-900/20' : 'bg-red-900/20') + '">' + (x.ok ? '‚úÖ' : '‚ùå') + ' ' + x.n + '</div>'; });
            if (p === 3) h += '<div class="bg-yellow-900/30 border-2 border-yellow-500 rounded-lg p-8 mt-6 text-center"><h2 class="text-3xl font-bold text-yellow-400 mb-4">MISSION SUCCESS!</h2><div class="bg-slate-900/70 p-6 rounded mb-4"><p class="text-4xl font-mono font-bold text-yellow-300">ALPHA-7X9K</p></div><p class="text-green-400">Earth radar systems are back online!</p></div>';
            document.getElementById('validation-results').innerHTML = h + '</div>';
            document.getElementById('validation-results').classList.remove('section-hidden');
            document.getElementById('validation-start').classList.add('section-hidden');
        }
    window.addEventListener('load', initDatabase);
    </script>
</body>
</html>
